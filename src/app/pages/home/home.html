<div class="container-fluid px-4 py-5">
  
  <!-- Modern Hero Carousel -->
  <section class="hero-carousel-section mb-5">
    <div class="hero-carousel-container">
      <div class="carousel-wrapper">
        <!-- Dynamic Slides based on Categories -->
        <div class="carousel-slide" 
             *ngFor="let category of getCarouselCategories(); let i = index" 
             [class.active]="i === 0"
             [attr.data-slide]="i + 1">
          <div class="slide-background"></div>
          <div class="container-fluid">
            <div class="row align-items-center">
              <div class="col-lg-6">
                <div class="slide-content">
                  <span class="slide-badge">{{getCategoryEmoji(category.name)}} {{category.name}}</span>
                  <h1 class="slide-title">
                    {{getCategorySlideTitle(category.name)}}<br>
                    <span class="highlight">{{getCategorySlideSubtitle(category.name)}}</span>
                  </h1>
                  <p class="slide-subtitle">{{getCategorySlideDescription(category.name)}}</p>
                  <div class="slide-stats" *ngIf="i === 0">
                    <div class="stat-item">
                      <span class="stat-number">{{categories.length}}+</span>
                      <span class="stat-label">Kategori</span>
                    </div>
                    <div class="stat-item">
                      <span class="stat-number">{{products.length * 100}}+</span>
                      <span class="stat-label">Ürün</span>
                    </div>
                    <div class="stat-item">
                      <span class="stat-number">99%</span>
                      <span class="stat-label">Memnuniyet</span>
                    </div>
                  </div>
                  <div class="feature-list" *ngIf="i !== 0">
                    <div class="feature-item" *ngFor="let feature of getCategoryFeatures(category.name)">
                      <i class="fas fa-check-circle"></i>
                      <span>{{feature}}</span>
                    </div>
                  </div>
                  <button class="btn btn-slide-cta" (click)="onCategoryClick(category)">
                    <i class="{{getCategoryIcon(category.name)}} me-2"></i>{{category.name}} Keşfet
                  </button>
                </div>
              </div>
              <div class="col-lg-6">
                <div class="slide-image-container">
                  <img [src]="getCategorySlideImage(category.name)" 
                       [alt]="category.name" 
                       class="slide-image">
                  <div class="floating-element element-1">
                    <i class="fas fa-shipping-fast"></i>
                    <span>Ücretsiz Kargo</span>
                  </div>
                  <div class="floating-element element-2">
                    <i class="fas fa-shield-alt"></i>
                    <span>Güvenli Ödeme</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Carousel Navigation -->
      <div class="carousel-navigation" *ngIf="getCarouselCategories().length > 1">
        <button class="nav-btn prev-btn" (click)="changeSlide(-1)">
          <i class="fas fa-chevron-left"></i>
        </button>
        <button class="nav-btn next-btn" (click)="changeSlide(1)">
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>

      <!-- Carousel Indicators -->
      <div class="carousel-indicators" *ngIf="getCarouselCategories().length > 1">
        <button class="indicator" 
                *ngFor="let category of getCarouselCategories(); let i = index"
                [class.active]="i === 0"
                (click)="goToSlide(i + 1)" 
                [attr.data-slide]="i + 1"></button>
      </div>

      <!-- Auto-progress bar -->
      <div class="progress-bar" *ngIf="getCarouselCategories().length > 1">
        <div class="progress-fill"></div>
      </div>
    </div>
  </section>

  <!-- Modern Kategoriler -->
  <section class="categories-section mb-5">
    <div class="row mb-4">
      <div class="col-12 text-center">
        <h2 class="section-title">
          <span class="section-badge">Kategoriler</span>
        </h2>
        <p class="section-subtitle">İhtiyacınız olan her şey burada</p>
      </div>
    </div>
    
    <!-- Loading State for Categories -->
    <div *ngIf="categoriesLoading" class="text-center py-3">
      <div class="spinner-border text-primary mb-2" role="status">
        <span class="visually-hidden">Kategoriler yükleniyor...</span>
      </div>
      <p class="text-muted">Kategoriler yükleniyor...</p>
    </div>

    <!-- Error State for Categories -->
    <div *ngIf="categoriesError" class="alert alert-warning text-center" role="alert">
      <i class="fas fa-exclamation-triangle me-2"></i>
      {{ categoriesError }}
    </div>
    
    <div *ngIf="!categoriesLoading && !categoriesError" class="row g-4">
      <div class="col-xl-2 col-lg-4 col-md-6" *ngFor="let category of categories; let i = index">
        <div class="category-card-modern" 
             [style.background]="getCategoryColor(i)"
             (click)="onCategoryClick(category)"
             style="cursor: pointer;">
          <div class="category-content">
            <div class="category-icon">{{getCategoryIcon(category.name)}}</div>
            <h5 class="category-name">{{category.name}}</h5>
            <p class="category-desc">{{category.description}}</p>
            <div class="category-count">Keşfet</div>
          </div>
          <div class="category-overlay">
            <button class="btn btn-light btn-sm rounded-pill"
                    (click)="onCategoryClick(category); $event.stopPropagation()">
              <i class="fas fa-arrow-right me-1"></i>Keşfet
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Modern Ürünler -->
  <section class="products-section">
    <div class="row mb-4">
      <div class="col-12 text-center">
        <h2 class="section-title">
          <span class="section-badge">Öne Çıkan Ürünler</span>
        </h2>
        <p class="section-subtitle">En popüler ve en çok tercih edilen ürünler</p>
      </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="text-center py-5">
      <div class="spinner-border text-primary mb-3" role="status">
        <span class="visually-hidden">Yükleniyor...</span>
      </div>
      <p class="text-muted">Ürünler yükleniyor...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="error" class="alert alert-warning text-center" role="alert">
      <i class="fas fa-exclamation-triangle me-2"></i>
      {{ error }}
      <br><small class="text-muted">Demo ürünler gösteriliyor.</small>
    </div>

    <!-- Backend Products -->
    <div *ngIf="!loading && !error && products.length > 0" class="row g-4">
      <div class="col-xl-3 col-lg-4 col-md-6" *ngFor="let product of products">
        <div class="product-card-modern">
          <div class="product-image-container">
            <!-- Backend'ten gelen fotoğraf varsa onu göster -->
            <img *ngIf="product.imageUrl" 
                 [src]="product.imageUrl" 
                 [alt]="product.name" 
                 class="product-image">
            
            <!-- Fotoğraf yoksa güzel placeholder görseli -->
            <img *ngIf="!product.imageUrl" 
                 src="https://lh5.googleusercontent.com/proxy/WyXx9KnsCHldAEhrQAeET9MHD8dkD--jYAGTDux22ROO_tw1yrv8mXeZoEOtHF5jDh328MI6mwxTvToTyJGOfrzqT4-E" 
                 [alt]="product.name + ' - Fotoğraf hazırlanıyor'" 
                 class="product-image product-placeholder">
            
            <div class="product-badge badge-success" *ngIf="product.stock > 0">
              Stokta
            </div>
            <div class="product-badge badge-danger" *ngIf="product.stock === 0">
              Tükendi
            </div>
            <div class="product-actions">
              <button class="btn btn-action" title="Beğen">
                <i class="fas fa-heart"></i>
              </button>
              <button class="btn btn-action" title="Hızlı Görüntüle">
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>
          
          <div class="product-content">
            <div class="product-rating mb-2">
              <div class="stars">
                <i class="fas fa-star active" *ngFor="let star of [1,2,3,4]"></i>
                <i class="fas fa-star"></i>
              </div>
              <span class="rating-text">({{product.stock}} adet)</span>
            </div>
            
            <h5 class="product-title">{{product.name}}</h5>
            <p class="product-description">{{product.description}}</p>
            
            <div class="product-price-container">
              <span class="product-price">{{product.price | currency:'TRY':'symbol':'1.2-2'}}</span>
              <small class="text-muted d-block">{{product.categoryName}}</small>
            </div>
            
            <button class="btn btn-add-cart w-100 mt-3" [disabled]="product.stock === 0">
              <i class="fas fa-shopping-cart me-2"></i>
              {{product.stock > 0 ? 'Sepete Ekle' : 'Stok Yok'}}
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Mock Products (fallback veya backend yoksa) -->
    <div *ngIf="!loading && (error || products.length === 0)" class="row g-4">
      <div class="col-xl-3 col-lg-4 col-md-6" *ngFor="let product of featuredProducts">
        <div class="product-card-modern">
          <div class="product-image-container">
            <img [src]="product.image" [alt]="product.name" class="product-image">
            <div class="product-badge" [class]="'badge-' + product.badgeColor">
              {{product.badge}}
            </div>
            <div class="product-actions">
              <button class="btn btn-action" title="Beğen">
                <i class="fas fa-heart"></i>
              </button>
              <button class="btn btn-action" title="Hızlı Görüntüle">
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>
          
          <div class="product-content">
            <div class="product-rating mb-2">
              <div class="stars">
                <i class="fas fa-star" *ngFor="let star of [1,2,3,4,5]" 
                   [class.active]="star <= product.rating"></i>
              </div>
              <span class="rating-text">({{product.reviewCount}} değerlendirme)</span>
            </div>
            
            <h5 class="product-title">{{product.name}}</h5>
            <p class="product-description">{{product.description}}</p>
            
            <div class="product-price-container">
              <div class="price-section">
                <span class="current-price">{{product.price | currency:'TRY':'symbol':'1.0-0'}}</span>
                <span class="original-price" *ngIf="product.originalPrice">
                  {{product.originalPrice | currency:'TRY':'symbol':'1.0-0'}}
                </span>
              </div>
              <div class="discount-badge" *ngIf="product.originalPrice">
                %{{((product.originalPrice - product.price) / product.originalPrice * 100) | number:'1.0-0'}} İndirim
              </div>
            </div>
            
            <button class="btn btn-add-cart w-100">
              <i class="fas fa-shopping-cart me-2"></i>Sepete Ekle
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <div class="text-center mt-5">
      <button class="btn btn-outline-primary btn-lg px-5">
        <i class="fas fa-plus me-2"></i>Daha Fazla Ürün Gör
      </button>
    </div>
  </section>
  
</div>
